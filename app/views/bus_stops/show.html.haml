%h1.page-header= t('.title')

= render partial: 'common/flash_messages'
.panel.panel-default
  .panel-heading
    .panel-title= t('.basic_info')
  .panel-body
    = render partial: 'common/show_key_value', locals: {key: BusStop.human_attribute_name(:name), value: @bus_stop.name}
    = render partial: 'common/show_key_value', locals: {key: Prefecture.human_attribute_name(:prefecture), value: @bus_stop.prefecture.try(:name)}

.panel.panel-default
  .panel-heading
    .panel-title= t('.route_info')
  %table.table
    %thead
      %th= t('.company_name')
      %th= t('.line_name')
    %tbody
      - @information.each do |id,info|
        - info[:routes].each_with_index do |route, index|
          %tr
            -if index==0
              %td(rowspan="#{info[:routes].length}")= info[:company].name
            %td= route.bus_line_name

.panel.panel-default
  .panel-heading
    .panel-title= t('.location_info')
  .panel-body
    #bus_stop_show_map
    #bus_stop_latitude.hide(data-location="#{@bus_stop.location.try(:y)}")
    #bus_stop_longitude.hide(data-location="#{@bus_stop.location.try(:x)}")
    #bus_stop_location_update.hide(data-update="#{@bus_stop.location_updated_at}")

.panel.panel-default
  .panel-heading
    .panel-title= t('.photo_info')
  .panel-body
    -# TODO link to photo
    Photo List

.panel.panel-default
  .panel-heading
    .panel-title= t('.update_info')
  .panel-body
    = render partial: 'common/show_key_value', locals: {key: BusStop.human_attribute_name(:location_updated_at), value: @bus_stop.location_updated_at || t('.not_register')}
    = render partial: 'common/show_key_value', locals: {key: BusStop.human_attribute_name(:last_modify_user), value: @bus_stop.user.try(:name) || t('.not_register')}
    = render partial: 'common/show_key_value', locals: {key: BusStop.human_attribute_name(:updated_at), value: @bus_stop.updated_at}
